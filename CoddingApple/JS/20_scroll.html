<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
<pre>
스크롤 다룰 때 주의점

 

1. 스크롤이벤트리스너 안의 코드는 1초에 60번 이상 실행됩니다. 

그래서 스크롤 이벤트리스너는 많이 달면 성능저하가 일어나니 스크롤바 1개마다 1개만 씁시다. 

 

2. 스크롤이벤트리스너 안의 코드는 1초에 여러번 실행되다보니 바닥체크하는 코드도 여러번 실행될 수 있습니다. 

숙제2에서 alert가 2번 뜨고 그럴 수 있다는 뜻입니다.

그걸 방지하고 싶으면 구글에 검색해보는 것도 나쁘지않습니다. 변수같은걸 활용하면 됩니다. 

현재 페이지를 끝까지 스크롤했는지 체크하려면?

 

숙제2랑 똑같이하면 됩니다.

근데 div 박스를 찾는게 아니라 이번엔 현재페이지를 찾아서 .scrollTop .scrollHeight .clientHeight 붙이면 됩니다. 

현재페이지를 찾으려면 

 

document.querySelector('html').scrollTop;  //현재 웹페이지 스크롤양
document.querySelector('html').scrollHeight; //현재 웹페이지 실제높이
document.querySelector('html').clientHeight; //현재 웹페이지 보이는 높이임
html 태그 찾으면 됩니다. 

.scrollTop 은 너무 길면 window.scrollY 써도 똑같습니다.

 

(주의)

1. 웹페이지 scrollHeight 구할 땐 브라우저마다 아주 약간의 오차가있을 수 있어서 테스트해보는게 좋습니다.

2. 웹페이지 scrollHeight 구하는 코드는 페이지 로드가 완료되고나서 실행해야 정확합니다. 그래서 &lt;body&gt; 끝나기 전에 적는게 좋습니다.

    오늘의 교훈이 뭐냐면 

    저런거 코드 외워봤자 다음날 다 까먹습니다. 
    
    1. 스크롤바 조작할 때 마다 코드실행가능하구나
    
    2. 박스의 숨겨진 실제 높이도 구할 수 있구나 
    
    3. 스크롤내린 양도 구할 수 있군
    
    이런거 이해하고 지나가면 충분합니다. 문법은 필요할 때 찾아쓰면 됩니다. 
    
     
    
     
    
     
    
    (응용)
    
    페이지 내릴 때 마다 페이지를 얼마나 읽었는지 진척도를 알려주는 UI 같은건 어떻게 만들면 될까요?
    
    까만색의 가로로 긴 div 박스 하나 만들고 
    
    페이지를 1% 읽으면 div 박스 길이는 1%
    
    페이지를 50%정도 읽으면 div 박스 길이는 50% 
    
    페이지 다 읽으면 div 박스 길이는 100% 
    
    이런거 만들어보면 재미있을듯요 
    
    실은 간단해서 재미없습니다 
</pre>
  </body>
</html>
